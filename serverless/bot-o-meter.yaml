metadata:
  name: bot-o-meter
  labels:
    nuclio.io/project-name: 5abdbedc-9d3c-4bd2-b758-f0c14b4c35d6
spec:
  description: "Bot-o-meter API Wrapper"
  handler: "main:handler"
  runtime: "python:3.6"
  env:
    - name: BOTOMETER_KEY
      value: YOUR-KEY
    - name: CONSUMER_KEY
      value: YOUR-KEY
    - name: CONSUMER_SECRET
      value: YOUR-KEY
    - name: ACCESS_TOKEN_KEY
      value: YOUR-KEY
    - name: ACCESS_TOKEN_SECRET
      value: YOUR-KEY
  resources: {}
  minReplicas: 1
  maxReplicas: 1
  build:
    functionSourceCode: IyBAamRhMTFvbgojIEZ1bmN0aW9uIHRoYXQgY2FsbHMgdG8gQm90LW8tbWV0ZXIgQVBJIGFuZCByZXR1cm5zIEFQSSByZXN1bHRzCmltcG9ydCBvcwppbXBvcnQganNvbgppbXBvcnQgYXJyb3cKaW1wb3J0IGJvdG9tZXRlcgoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgCiAgICAjZGF0YSA9IGpzb24ubG9hZHMoZXZlbnQuYm9keS5kZWNvZGUoJ3V0Zi04JykpCiAgICBkYXRhID0gZXZlbnQuYm9keQogICAgc2NyZWVuX25hbWUgPSBkYXRhWyd1c2VyJ11bJ3NjcmVlbl9uYW1lJ10KCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYnQ2FsbGluZyBCb3Qtby1tZXRlciBmb3I6IHtzY3JlZW5fbmFtZX0nKQoKCiAgICBCT1RPTUVURVJfS0VZID0gb3MuZ2V0ZW52KCJCT1RPTUVURVJfS0VZIikKICAgIENPTlNVTUVSX0tFWSA9IG9zLmdldGVudigiQ09OU1VNRVJfS0VZIikKICAgIENPTlNVTUVSX1NFQ1JFVD0gb3MuZ2V0ZW52KCJDT05TVU1FUl9TRUNSRVQiKQogICAgQUNDRVNTX1RPS0VOX0tFWT0gb3MuZ2V0ZW52KCJBQ0NFU1NfVE9LRU5fS0VZIikKICAgIEFDQ0VTU19UT0tFTl9TRUNSRVQ9IG9zLmdldGVudigiQUNDRVNTX1RPS0VOX1NFQ1JFVCIpCgogICAgdHdpdHRlcl9hcHBfYXV0aCA9IHsKICAgICAgICAnY29uc3VtZXJfa2V5JzogQ09OU1VNRVJfS0VZLAogICAgICAgICdjb25zdW1lcl9zZWNyZXQnOiBDT05TVU1FUl9TRUNSRVQsCiAgICAgICAgJ2FjY2Vzc190b2tlbic6IEFDQ0VTU19UT0tFTl9LRVksCiAgICAgICAgJ2FjY2Vzc190b2tlbl9zZWNyZXQnOiBBQ0NFU1NfVE9LRU5fU0VDUkVULAogICAgfQogICAgYm90b21ldGVyX2FwaV91cmwgPSAnaHR0cHM6Ly9ib3RvbWV0ZXItcHJvLnAubWFzaGFwZS5jb20nCiAgICBib20gPSBib3RvbWV0ZXIuQm90b21ldGVyKGJvdG9tZXRlcl9hcGlfdXJsPWJvdG9tZXRlcl9hcGlfdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdF9vbl9yYXRlbGltaXQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2hhcGVfa2V5PUJPVE9NRVRFUl9LRVksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKnR3aXR0ZXJfYXBwX2F1dGgpICAgICAgICAgICAgCgogICAgcmVzID0gYm9tLmNoZWNrX2FjY291bnQoc2NyZWVuX25hbWUpCiAgICByZXNbJ0B1cGRhdGVkX2F0J10gPSBzdHIoYXJyb3cudXRjbm93KCkpCgogICAgcmV0dXJuIGNvbnRleHQuUmVzcG9uc2UoYm9keT1yZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlPSdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19jb2RlPTIwMCkK
    commands:
      - 'pip install arrow botometer'
    runtimeAttributes:
      repositories: []
    codeEntryType: sourceCode
    timestamp: 1561410418
  loggerSinks:
    - level: debug
  platform: {}
  eventTimeout: ""
  version: 1
